# PM2.5 Air Quality Monitor

This project is an update to my earlier PM2.5 Air Quality Monitor.  The previous version used an older [Plantower PM2.5 air quality sensor](https://www.adafruit.com/product/3686) sensor that did a fine job measuring 2.5 micron particulates and helping me keep an eye on overall air quality at our home, but used a serial UART interface that was a bit tedious to program for.   Earlier this year Sensirion introduced their new [SEN5x](https://sensirion.com/products/catalog/SEN54/) air quality sensors with a much easier to manage I2C interface.  Sparkfun sells the [SEN54](https://www.sparkfun.com/products/19325), which measures PM1.0, PM2.5, and PM10.0 particulates as well as Volatile Organic Compounds (VOC), temperature and humidity.  Delightfully, Sensirion provides [Arduino libraries](https://github.com/Sensirion/arduino-i2c-sen5x) for the SEN5x series, making it an ideal upgrade for my home air quality monitor.

The [Adafruit Feather Huzzah](https://www.adafruit.com/product/2821) continues to be a great microcontroller option for projects like this given the built-in WiFi support, flexible power options, ready access to GPIO, and Feather form factor.

In addition to preserving support of [Dweet](https://dweet.io) and [ThingSpeak](https://thingspeak.com) for reporting data, I added support for storing data locally using InfluxDB.  I have InfluxDB 1.8 running on a Raspberry Pi 4 on my home network, using it to add local data storage capabilities to many of my smart home and IoT projects.  As a time series database it's perfect for sensor and device event storage, and built-in integration with Grafana enables quick construction of powerful browser-based graphical dashboards that look great on computer, tablet, and mobile phone.

Much of the rest of the project remains the same as the previous version, especially the code that calculates AQI values from particulate readings using a [complex but obscure formula](https://forum.airnowtech.org/t/the-aqi-equation/169) that continues to not be part of anyone's AQI sensor libraries, alas.

After our experience with alarmingly poor air quality during the California wildfire outbreak in the summer of 2020 I'm very mindful of keeping an eye on particulate levels in the air both inside and outside our home.  The SEN54 plus Feather MCU with InfluxDB and Grafana gives me all the tools I need to do that.

## Usage Note
I've written general purpose functions to do data reporting via Dweet, ThingSpeak, and InfluxDB and use them consistently across my Feather Huzzah and ESP32 projects.  In their current form they need to be customized per project to transmit the right data fields depending on what the project is trying to report.  They also require some configuration of the connections to Dweet (in the form of the device name), ThingSpeak (in the form of channel ID number and API write key), and InfluxDB (to specify the server and login account for data logging along with the measurement schema for storing data).  You'll need to edit the project code to use whatever configuration values are appropriate for you.
